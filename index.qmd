[//]: # (# Avances de tesis.)

# Introducción

<!--
Buen dia, les habla ing Ruben mg y a continuación les presentaré
los avances de mi tesis titulada "Estimación ...".
asesorada por los doctores Arturo E y Victor U.
-->

<!--
La presentación estara estructurada con una introducción del problema que se aborda
la metodología que se propone
y otros conceptos del marco teorico como objetivos, preguntas, hipotesis.
-->
::: {.notes}
- Haciendo introducción al tema, podemos repasar algunas preguntas como:
:::

## Estacionamiento

- ¿Qué es el estacionamiento?
- ¿Por qué es importante?
- ¿Qué problemas presenta?
- ¿Cómo se puede minimizar?

![](/img/estfull.png)

::: {.notes}

- El estacionamiento es el acto de dejar un vehículo en reposo en un espacio destinado para esto.

- Es importante porque permite a los conductores dejar sus vehículos de forma segura mientras realizan otras
  actividades.

- En lugares concurridos, puede ser complicado encontrar un lugar
  o incluso si ya encontraste un lugar, la maniobra para posicionar el vehículo dentro del espacio
  se puede entorpecer por obstaculos o falta de visibilidad o inexperiencia del conductor.
  o incluso conductores habilidosos pueden fallar cuando es necesario una serie de maniobras
  que dependen unas de otras y si calculas mal en alguna ,
  en la siguiente maniobra se tendria rectificar esta equivocación.

- Con la ayuda de sistemas de asistencia al conductor.

:::

## Sistemas de asistencia al conductor

<img src="/img/asistencia1.jpg" alt=""/>
<img src="/img/reversa.jpeg" alt="" />
<img src="/img/reversa2.jpg" alt=""/>

::: {.notes}

- Los sistemas de asistencia al conductor son programas informáticos
  que proporcionan información sobre el entorno del vehículo.

- Algunos son tan avanzados que pueden estacionar el vehículo de forma autónoma
  y otros más simples que solo proporcionan información
  sobre la distancia a objetos cercanos y orientacion del vehículo.

- Una solución eficaz que puede contribuir a la mejora de estos sistemas es la inteligencia artificial.
  Si una red neuronal aprendiera a estacionar un vehículo en un ambiente controlado,
  con este conocimiento podría retornar información de utilidad para cumplir esta tarea.

:::

## Aprendizaje por Refuerzo

::: {.incremental}
:::: {.columns}

::: {.column width="50%"}
<img class="my-rl-diagram" src="/img/RL.svg" alt="" />
:::

::: {.column width="25%"}

- Agente  <img class="my-rl-list" src="/img/tesla.png" alt="" />
- Acciones <img class="my-rl-list" src="/img/actions.png" alt="" />
- Entorno <img class="my-rl-list" src="/img/park.png" alt="" />
:::

::: {.column width="25%"}

- Interprete <img class="my-rl-list" src="/img/cam.jpg" alt="" />
- Estado <img class="my-rl-list" src="/img/ubi.png" alt="" />
- Recompensa
  <img class="my-rl-list-s" src="/img/sum.png" alt=""/>
  <img class="my-rl-list-s" src="/img/bien.png" alt=""/>
  <img class="my-rl-list-s" src="/img/mas.png" alt=""/>
  <img class="my-rl-list-s" src="/img/mal.png" alt=""/>
:::

::::
:::

::: {.notes}

- Dentro de la inteligencia artificial, un buen candidato para esta situación
  son los algoritmos de aprendizaje por refuerzo.

- Estos algoritmos se basan en la interacción de un agente con un entorno.
  El agente realiza acciones en el entorno que pueden ser interpretadas y evaluadas
  según va cambiando el estado del entorno.
  estos cambios en el entorno pueden ser representados en una recompensa que se
  utiliza para aprender a elegir acciones cada vez mejores.


- En el caso de estacionamiento, el agente sería el vehículo,
  las acciones serían las maniobras que puede realizar el vehículo, acelerar, frenar, girar.
  El entorno sería el estacionamiento.
  El intérprete sería un sistema que analice los datos de los sensores del vehículo, como la cámara.
  El estado podría ser la pose del vehículo con respecto al estacionamiento.
  La recompensa podría ser una función que premie las acciones que resulten favorables
  y penalice las desfavorables.

- pero... ¿Qué haría falta para implementar un algoritmo así?
  Pues el agente, las acciones y el entorno nos lo puede proveer un simulador.
  Y el intérprete, el estado y la recompensa lo podemos estimar con soluciones de visión computacional.
:::

## Visión Computacional

[//]: # (<img src="/img/back.png" alt=""/> )

[//]: # (<img src="/img/up.png" alt=""/> )

[//]: # (<img src="/img/front.png" alt=""/> )

<img src="/img/line_detection/lines.png" alt=""/>
<img src="/img/line_detection/lines_only.png" alt=""/>

<img src="/img/line_detection/povs.png" alt=""/>
<img src="/img/up.png" alt=""/> 
<img src="/img/front.png" alt=""/>



:::footer
:::

::: {.notes}

- donde podemos procesar los datos de los sensores del vehículo como la camara
  y representar matematicamete la posicion del vehículo con respecto al estacionamiento.

- y en construir este sistema de vision computacional es en lo que nos estamos enfocando en este trabajo.
  y para demostrar su aplicacion práctica, junto a la simulacion lo probaremos en algoritmos de aprendizaje por
  refuerzo.
:::

# Trabajos relacionados

| **Características / Trabajos relacionados**         | **Propia** | **Autonomous Driving Architectures** [@bachute2021autonomous] | **Vision-based Autonomous Car Racing** [@cai2021vision] | **Model-based Probabilistic Collision Detection** [@althoff2009model] | **Cost-effective Vehicle Detection System** [@alam2022cost] |
|-----------------------------------------------------|------------|---------------------------------------------------------------|---------------------------------------------------------|-----------------------------------------------------------------------|-------------------------------------------------------------|
| Utilización de cámaras RGB y sensores               | X          | X                                                             | X                                                       | X                                                                     | X                                                           |
| Algoritmos de Aprendizaje Automático                | X          | X                                                             | X                                                       | X                                                                     | X                                                           |
| Modelar la pose del vehiculo en el estacionamiento  | X          |                                                               |                                                         |                                                                       |                                                             |
| Maniobras de estacionamiento                        |            | X                                                             |                                                         |                                                                       |                                                             |
| Análisis de tareas en la conducción autónoma        |            | X                                                             |                                                         | X                                                                     |                                                             |
| Detección de vehículos en conducción autónoma       | X          |                                                               |                                                         |                                                                       | X                                                           |
| Predicción estocástica de ocupación de la carretera |            |                                                               |                                                         | X                                                                     |                                                             |
| Aprendizaje por refuerzo imitativo                  |            |                                                               | X                                                       |                                                                       |                                                             |

::: {.notes}

- Se han revisado trabajos relacionados con este contexto donde se utilizan camaras y sensores
  para resolver el problemas de la conducción autónoma como el estacionamiento.

- Pero esto no es precisamente lo que queremos proponer en este trabajo.
  Queremos proponer un sistema de visión computacional que permita modelar la posición del vehículo
  con respecto al estacionamiento y utilizar este modelo para delegar la solución del estacionamiento
  a un algoritmo de aprendizaje automático.
:::

# Metodología

::: {.notes}
como parte de la metodología a seguir, necesitamos un entorno de simulación que nos permita modelar
esta situación lo mas realista posible.
:::

## Entorno de simulación

### Carla

:::: {.columns}

::: {.column width="50%"}
<iframe src="https://www.youtube.com/embed/q4V9GYjA1pE?autoplay=1&mute=1&start=0&end=55&loop=1&playlist=q4V9GYjA1pE" width="100%" height="500"></iframe>
:::

::: {.column width="50%"}

- Código abierto [@dosovitskiy2017carla]
- Entornos urbanos
- Ciudades, carreteras, estacionamientos
- Vehículos, peatones, semáforos, sensores
- Api Python

- <img class="my-list-s" src="/img/intel.png" alt=""/>

<img class="my-list-s" src="/img/tri.png" alt=""/>
<img class="my-list-s" src="/img/compvisioncenter.png" alt=""/>
<img class="my-list-s" src="/img/UnrealEngine.svg" alt=""/>
:::

::::

:::footer
:::

::: {.notes}

Proponemos: Carla (Car learning to act) pssei.

- Un simulador de código abierto para la investigación de la conducción autónoma.
- Incluye mapas de entornos urbanos con ciudades, carreteras, estacionamientos,
- así como diversos actores como vehículos, peatones, semáforos o sensores
- que proveen interfaces para manipular su comportamiento a conveniencia.

:::

### Diseño del entorno de simulación

<img class="my-h" src="/img/distances.png" alt=""/>
<img class="my-h" src="/img/distances2.png" alt=""/>
<img class="my-h" src="/img/mirrow_camara_ex.jpg" alt=""/>
<img class="my-h" src="/img/mirrow_camara_ex2.jpg" alt=""/>

::: {.notes}

- para recrear el entorno se simulara un estacionamiento
  y un vehiculo equipado con camaras y sensores con el objetivo de estacionarse

- las imagenes de arriba son ejemplos la simulacion
- y las imagenes de abajo son ejemplos de los datos capturados por la camara
:::

## Representación de la posición relativa al estacionamiento

### Posición relativa

<iframe src="https://www.geogebra.org/classic/a8pwjzyk?embed" width="100%" height="600" allowfullscreen style="border: 1px solid #e4e4e4;border-radius: 4px;" frameborder="0"></iframe>

<!-- 
$(\rho_1, \theta_1, z)$ , $(\rho_2, \theta_2, z)$ , $(\rho_3, \theta_3, z)$ , $(\rho_4, \theta_4, z)$
-->
:::footer
:::

::: {.notes}
entonces habiendo estimado estas 4 $\rho$ y 4 $\theta$ podemos representar la posición del vehículo que nos
servira como modelo del estado del entorno.
:::

## Cálculo de distancias

### Detección de líneas paralelas

:::: {.columns}

::: {.column width="50%"}
<img src="/img/line_detection/lines.png" alt=""/>
:::

::: {.column width="50%"}

- Umbralización
- Detección de contornos (Algoritmo de Canny)
- Lineas paralelas (Transformada de Hough)
:::
::::

### Ecuaciones de las rectas de las líneas

:::: {.columns}
::: {.column width="60%"}
$a x + b y + c = 0$
$$
\begin{aligned}
\left[\begin{array}{ccc}
x_1 & y_1 & 1 \\
x_2 & y_2 & 1
\end{array}\right]
\begin{bmatrix}
a \\
b \\
c
\end{bmatrix}
=
\begin{bmatrix}
0 \\
0
\end{bmatrix}
\end{aligned}
$$
:::
::: {.column width="40%"}

- Calculamos el espacio nulo (a,b,c) de cada recta
- SVD (Descomposición en valores singulares)

:::
::::

### Ubicación de puntos de fuga

:::: {.columns}
::: {.column width="60%"}
<img src="/img/line_detection/povs.png" alt=""/>
:::
::: {.column width="40%"}

- Intersección de las rectas (producto cruz de todas las rectas)
- Detección de cúmulos de puntos (K-means)
:::
::::

### Posición de la retícula del estacionamiento

<iframe src="https://www.geogebra.org/classic/fmbj5sj3?embed" width="100%" height="600" allowfullscreen style="border: 1px solid #e4e4e4;border-radius: 4px;" frameborder="0"></iframe>

### Predicción de distancias

Predicción de distancias

# Preguntas de investigación

- ¿Cómo se puede representar la posición de un vehículo con respecto a su espacio de estacionamiento?
- ¿Cómo se puede estimar esta posición utilizando las cámaras y sensores del vehículo?
- ¿Cómo usar esta posición estimada para que el vehículo se estacione automáticamente?

# Hipótesis

“Estimando la posición relativa al estacionamiento de un vehículo mediante cámaras y sensores,
y utilizando esta posición, se puede lograr un sistema de parqueo automático en simulación.”

# Objetivos

## Objetivo general:

Desarrollar un sistema de estimación de la posición relativa al estacionamiento de un vehículo
mediante cámaras y sensores para parqueo automático.

## Objetivos específicos:

- Modelar un ambiente de simulación de un vehículo y estacionamiento.
- Obtener datos de los sensores del vehículo en simulación.
- Interpretar los datos de los sensores mediante técnicas de visión computacional.
- Procesar los datos y estimar la posición del vehículo con respecto al estacionamiento.
- Utilizar la posición estimada para lograr un sistema de parqueo automático en simulación.

## Calendario de Actividades

| **Actividad**                               | Ene | Feb | Mar | Abr | May | Jun | Jul | Ago | Sep | Oct | Nov | Dic | Ene | Feb | Mar | Abr | May | Jun |
|---------------------------------------------|-----|-----|-----|-----|-----|-----|-----|-----|-----|-----|-----|-----|-----|-----|-----|-----|-----|-----|
| Investigación y revisión bibliográfica      | x   | x   | x   | x   | x   | x   | x   | x   | x   | x   | x   | x   | x   |     |     |     |     |     |
| Diseño y Configuración del Entorno Simulado | x   | x   | x   | x   |     |     |     |     |     |     |     |     |     |     |     |     |     |     |
| Adquisición y pre-procesamiento de Datos    |     |     |     |     | x   | x   | x   |     |     |     |     |     |     |     |     |     |     |     |
| Interpretar los datos de los sensores       |     |     |     |     |     |     | x   | x   | x   |     |     |     |     |     |     |     |     |     |
| Estimación de la posición de la retícula    |     |     |     |     |     |     |     | x   | x   | x   | x   |     |     |     |     |     |     |     | 
| Predicción de distancias                    |     |     |     |     |     |     |     |     |     |     | x   | x   | x   |     |     |     |     |     |
| Desarrollo y Entrenamiento de Algoritmos    |     |     |     |     |     |     |     |     |     |     |     |     | x   | x   | x   | x   | x   | x   |
| Evaluación y Ajuste del Sistema             |     |     |     |     |     |     |     |     |     |     |     |     |     |     |     | x   | x   | x   |
| Documentación y Análisis de Resultados      | x   | x   | x   | x   | x   | x   | x   | x   | x   | x   | x   | x   | x   | x   | x   | x   | x   | x   |
| Redacción y Revisión del documento de tesis |     |     |     |     |     |     |     |     |     |     |     |     |     | x   | x   | x   | x   | x   |  

# Referencias


